const mediaQueryCallbacks = []

const matchMediaResponse = {
    matches: true,
    addListener: (callback) => {
        mediaQueryCallbacks.push(callback)
    },
    removeListener: (removedCallback) => {
        for (let i = mediaQueryCallbacks.length - 1; i >= 0; i--) {
            if (mediaQueryCallbacks[i] === removedCallback) {
                mediaQueryCallbacks.splice(i,1)
            }
        }
    },
    onchange: () => {
        mediaQueryCallbacks.forEach(callback => callback(matchMediaResponse))
    },
}

global.window.matchMedia = jest.fn(() => matchMediaResponse)
