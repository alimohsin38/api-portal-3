import React from 'react'
import {shallow, render} from 'enzyme'
import UserImage from './'
import UserImageSVG from './userImageSVG'

describe('UserImage', () => {
    describe('default component', () => {
        const wrapper = shallow(
            <UserImage src="" />
        )

        it('should have a data-abc-id prop', () => {
            expect(wrapper.prop('data-abc-id')).toBe('userImage')
        })

        it('should have a default size prop', () => {
            expect(wrapper.prop('size')).toBe('4.375rem')
        })

        it('should use the UserImageSVG for placeholder', () => {
            expect(wrapper.prop('placeholder').type).toBe(UserImageSVG)
        })
    })

    describe('will handle props', () => {
        const wrapper = shallow(
            <UserImage className="fake-className" src="fake-img-src" size="111px" alt="Some Name"/>
        )

        it('should assign the src attribute of the img', () => {
            expect(wrapper.prop('src')).toBe('fake-img-src')
        })

        it('should have the passed className', () => {
            expect(wrapper.hasClass('fake-className')).toBe(true)
        })

        it('should have an alt of "Some Name"', () => {
            expect(wrapper.prop('alt')).toBe('Some Name')
        })
    })

    describe('will render initials', () => {
        const wrapper = render(
            <UserImage src="fake-img-src" alt="Some Name"/>
        )

        it('should render the initials', () => {
            expect(wrapper.text()).toBe('S')
        })
    })

    describe('will render user image placeholder', () => {
        const wrapper = render(
            <UserImage src="fake-img-src"/>
        )

        it('should render the user image placeholder', () => {
            expect(wrapper.find('svg').length).toBe(1)
        })
    })
})
