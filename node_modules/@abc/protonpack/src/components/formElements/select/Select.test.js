import React from 'react'
import {shallow} from 'enzyme'
import Select from './'

describe('Select', () => {
    const select = shallow(
        <Select><option></option></Select>
    ) 

    it('Will render to a select with a single empty default option', () => {
        expect(select.html()).toBe('<select class="form-control"><option data-abc-id="option-0"></option></select>')
    })
}) 

describe('Selct w/ options and defaultOption', () => {
    const select = shallow(
        <Select id="someid" defaultOption="Blank">
            <option value="A">A in ABC</option>
            <option value="B">B in ABC</option>
            <option value="C">C in ABC</option>
        </Select>
    ) 

    it('Will render to a select with 4 options', () => {
        expect(select.is('.form-control')).toBe(true)
        expect(select.children().length).toBe(4)
        expect(select.childAt(0).containsMatchingElement(<option data-abc-id="defaultOption">Blank</option>)).toBe(true)
        expect(select.childAt(1).containsMatchingElement(<option value="A" data-abc-id="option-0">A in ABC</option>)).toBe(true)
        expect(select.childAt(2).containsMatchingElement(<option value="B" data-abc-id="option-1">B in ABC</option>)).toBe(true)
        expect(select.childAt(3).containsMatchingElement(<option value="C" data-abc-id="option-2">C in ABC</option>)).toBe(true)
    })
}) 

describe('Select w/ Single Option', () => {
    const select = shallow(
        <Select><option value="A">A</option></Select>
    ) 

    it('Will render to a select with a single option', () => {
        expect(select.html()).toBe('<select class="form-control"><option value="A" data-abc-id="option-0">A</option></select>')
    })
}) 

describe('Select w/ Single Option and defaultOption', () => {
    const select = shallow(
        <Select defaultOption="XYZ"><option value="A">A</option></Select>
    ) 

    it('Will render to a select with a single empty default option', () => {
        expect(select.html()).toBe('<select class="form-control"><option data-abc-id="defaultOption" value="">XYZ</option><option value="A" data-abc-id="option-0">A</option></select>')
    })
}) 

describe('Extra classNames', () => {
    const select = shallow(
        <Select className="xyz 123"><option /></Select>
    ) 

    it('Will render to a select with a single empty default option', () => {
        expect(select.is('.form-control')).toBe(true)
        expect(select.is('.xyz')).toBe(true)
        expect(select.is('.123')).toBe(true)
    })
})

describe('Select with ID', () => {
    const select = shallow(
        <Select id="test" className="xyz 123"><option /></Select>
    )

    it('Will render a select with an ID', () => {
        expect(select.is('.form-control')).toBe(true)
        expect(select.is('#test')).toBe(true)
    })
})
